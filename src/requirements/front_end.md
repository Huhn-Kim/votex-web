** 프로젝트 구조 **

## 1. 디렉토리 구조
```
votex-web/
├── public/                 # 정적 파일 디렉토리
│   ├── votey_icon2.png    # 기본 투표 이미지
│   └── ...
├── src/
│   ├── components/        # React 컴포넌트
│   │   ├── App.tsx        # 앱 최상위 컴포넌트
│   │   ├── VoteCard.tsx   # 투표 카드 컴포넌트
│   │   ├── ViewRank.tsx   # 순위 보기 컴포넌트
│   │   ├── CreateVote.tsx # 투표 생성/수정 컴포넌트
│   │   ├── MyVotes.tsx    # 내 투표 관리 컴포넌트
│   │   ├── VoteList.tsx   # 투표 목록 컴포넌트
│   │   ├── MyPage.tsx     # 마이페이지 컴포넌트
│   │   ├── VoteAnalysisPage.tsx # 투표 분석 페이지 컴포넌트
│   │   ├── SearchModal.tsx # 검색 모달 컴포넌트
│   │   ├── ConfirmModal.tsx # 확인 모달 컴포넌트
│   │   ├── LoadingOverlay.tsx # 로딩 오버레이 컴포넌트
│   │   ├── VoteSkeletonCard.tsx # 투표 카드 스켈레톤 UI
│   │   ├── RankSkeletonCard.tsx # 랭킹 카드 스켈레톤 UI
│   │   └── MypageSkeletonCard.tsx # 마이페이지 스켈레톤 UI
│   ├── context/           # React Context
│   │   ├── VoteContext.tsx # 투표 관련 전역 상태 관리
│   │   └── AuthContext.tsx # 인증 관련 전역 상태 관리
│   ├── lib/               # 유틸리티 및 API
│   │   ├── api.ts         # API 호출 함수
│   │   ├── supabase.ts    # Supabase 클라이언트
│   │   ├── types.ts       # TypeScript 타입 정의
│   │   └── database.sql   # 데이터베이스 스키마
│   ├── styles/            # CSS 모듈
│   │   ├── ViewRank.module.css
│   │   ├── VoteCard.module.css
│   │   ├── CreateVote.module.css
│   │   ├── MyVotes.module.css
│   │   └── ...
│   ├── utils/             # 유틸리티 함수
│   │   ├── numberFormat.ts # 숫자 포맷팅
│   │   ├── formatUrl.ts   # URL 포맷팅
│   │   └── auth.ts        # 인증 관련 유틸
│   ├── assets/            # 이미지, 아이콘 등 에셋
│   ├── pages/             # 페이지 컴포넌트
│   │   ├── HomePage.tsx   # 홈 페이지
│   │   ├── MyVotesPage.tsx # 내 투표 페이지
│   │   ├── CreateVotePage.tsx # 투표 생성 페이지
│   │   └── auth/          # 인증 관련 페이지
│   ├── main.tsx           # 앱 진입점
│   └── vite.config.ts     # Vite 설정
└── package.json           # 프로젝트 설정 및 의존성
```

## 2. 주요 컴포넌트 설명

### 2.1 VoteCard.tsx
- 개별 투표 카드 컴포넌트
- 주요 기능:
  - 투표 정보 표시 (질문, 옵션, 만료일 등)
  - 투표 참여 기능
  - 좋아요 기능
  - 투표 결과 시각화 (그래프, 백분율)
  - 이미지/비디오 미디어 표시
  - 투표 통계 표시
  - 내 투표 관리 (삭제, 수정, 게시)
  - 상세 분석 링크

### 2.2 ViewRank.tsx
- 투표 순위/랭킹을 표시하는 메인 컴포넌트
- 주요 기능:
  - 인기 투표 목록 표시 및 정렬
  - 필터링 (전체/진행중/종료)
  - 검색 통합
  - 무한 스크롤
  - 스켈레톤 로딩 UI
  - 반응형 디자인
  - 실시간 데이터 갱신

### 2.3 CreateVote.tsx
- 투표 생성/수정 컴포넌트
- 주요 기능:
  - 투표 질문 입력
  - 질문 이미지/비디오 업로드
  - 옵션 추가/삭제 (최대 5개)
  - 옵션 이미지 업로드 및 편집
  - 투표 유형 선택 (텍스트/이미지/비디오)
  - 투표 기간 설정
  - 출처 링크 설정
  - 폼 유효성 검사
  - 이미지 에디터 (회전, 확대/축소, 크롭)
  - 진행률 표시
  - 완료 모달 및 자동 리디렉션

### 2.4 MyVotes.tsx
- 내 투표 관리 컴포넌트
- 주요 기능:
  - 생성한 투표/참여한 투표 탭 구분
  - 투표 카드 목록 표시
  - 스켈레톤 로딩 UI
  - 스크롤 위치 기억
  - 새로 생성/수정된 투표 자동 스크롤
  - 투표 관리 기능 (게시, 삭제, 수정)

### 2.5 VoteAnalysisPage.tsx
- 투표 상세 분석 페이지 컴포넌트
- 주요 기능:
  - 통계 시각화 (성별, 연령, 지역별)
  - 투표 참여자 데이터 분석
  - 차트 및 그래프 표시
  - 투표 결과 상세 표시
  - 공유 기능

### 2.6 ConfirmModal.tsx 및 기타 모달
- 모달 컴포넌트들
- 주요 기능:
  - 확인/취소 상호작용
  - 커스텀 타이틀 및 메시지
  - 타이머 기반 자동 닫기 (성공 모달)
  - 다양한 스타일 지원

## 3. 상태 관리

### 3.1 VoteContext.tsx
- 전역 투표 상태 관리 시스템
- 주요 상태:
  ```typescript
  interface VoteContextType {
    votes: VoteTopic[];              // 전체 투표 목록
    myVotes: VoteTopic[];           // 사용자의 투표 목록
    loading: boolean;               // 로딩 상태
    error: string | null;           // 에러 상태
    progress: number;               // 진행률 (0-100)
    progressStatus: string;         // 진행 상태 메시지
    userReactions: Map<number, {    // 사용자 반응 상태
      liked: boolean
    }>;
    userVotes: Map<number, number | null>; // 사용자 투표 상태
  }
  ```
- 주요 기능:
  1. 투표 데이터 관리
     - 투표 목록 조회/필터링/정렬
     - 투표 생성/수정/삭제
     - 옵션 추가/제거
  2. 사용자 액션 처리
     - 좋아요 처리
     - 투표 참여 처리
     - 이미지/비디오 업로드
  3. 데이터 동기화
     - 실시간 데이터 갱신
     - 에러 처리 및 복구
  4. 성능 최적화
     - 메모이제이션
     - 필요 시에만 데이터 로딩
     - 진행률 표시

### 3.2 AuthContext.tsx
- 인증 상태 관리 시스템
- 주요 기능:
  - 사용자 로그인/로그아웃
  - 사용자 정보 관리
  - 세션 유지 및 갱신
  - 인증 상태 모니터링
  - 게스트 모드 지원

## 4. 주요 UI 최적화 기법

### 4.1 스켈레톤 UI
- 데이터 로딩 중 사용자 경험 개선
- 구현 컴포넌트:
  - VoteSkeletonCard.tsx
  - RankSkeletonCard.tsx
  - MypageSkeletonCard.tsx

### 4.2 지연 로딩 (Lazy Loading)
- 필요한 시점에만 리소스 로드
- 주요 적용:
  - 이미지 미디어 지연 로딩
  - 투표 목록 페이지네이션/무한 스크롤
  - 데이터 필요 시점에 로드

### 4.3 상태 메모이제이션
- 불필요한 재계산 방지
- 주요 적용:
  - useMemo를 사용한 필터링/정렬 결과 캐싱
  - useCallback으로 함수 재생성 방지
  - 캐시된 상태 활용

### 4.4 반응형 디자인
- 다양한 디바이스 지원
- 주요 기법:
  - 미디어 쿼리 활용
  - 가변 그리드 시스템
  - 터치 이벤트 최적화
  - 모바일 우선 디자인

## 5. API 통신

### 5.1 Supabase 통합
- 클라우드 데이터베이스 연동
- 주요 기능:
  - PostgreSQL 데이터베이스 조작
  - 사용자 인증 및 권한 관리
  - 스토리지 관리 (이미지/비디오)
  - 실시간 구독
  - RLS(Row Level Security)

### 5.2 API 함수 (api.ts)
- 백엔드 통신 추상화
- 주요 함수:
  - `getVoteTopics`: 투표 목록 조회
  - `addVote`: 새 투표 생성
  - `getVoteTopicById`: 특정 투표 조회
  - `updateVoteTopic`: 투표 업데이트
  - `updateVote`: 투표 선택 업데이트
  - `uploadImageToStorage`: 이미지 업로드
  - `uploadVideoToStorage`: 비디오 업로드
  - `likeVote`: 좋아요 처리

## 6. 주요 성능 최적화 기법

### 6.1 이미지 최적화
- 이미지 처리 개선
- 구현 기법:
  - 이미지 크기 최적화 및 압축
  - 이미지 지연 로딩
  - 이미지 에러 처리 및 대체 이미지
  - 이미지 캐싱
  - 미디어 자동 포맷 변환

### 6.2 상태 관리 최적화
- 효율적인 상태 업데이트
- 구현 기법:
  - 배치 업데이트 활용
  - 불필요한 리렌더링 방지
  - 컨텍스트 세분화
  - 지역 상태와 전역 상태 분리

### 6.3 애니메이션 및 트랜지션
- 부드러운 UI 경험
- 구현 기법:
  - CSS 트랜지션
  - 하드웨어 가속 사용
  - 최적화된 애니메이션 프레임
  - 지연 로딩과 결합

## 7. 사용자 경험 개선 기능

### 7.1 자동 스크롤 및 포커스
- 컨텍스트 유지
- 구현 기능:
  - 투표 생성 후 해당 카드로 자동 스크롤
  - 스크롤 위치 기억 및 복원
  - 성공/에러 메시지 자동 타이머
  - 하이라이트 효과

### 7.2 진행률 표시
- 작업 상태 가시화
- 구현 기능:
  - 투표 생성/수정 진행률 표시
  - 이미지/비디오 업로드 진행률
  - 단계별 상태 메시지
  - 취소 및 재시도 기능

### 7.3 에러 처리 및 복구
- 장애 대응 메커니즘
- 구현 기능:
  - 유저 친화적 에러 메시지
  - 자동 재시도 메커니즘
  - 오프라인 모드 대응
  - 입력 데이터 유효성 검증

### 7.4 즉각적 피드백
- 사용자 액션 인지
- 구현 기능:
  - 투표 참여 즉시 결과 반영
  - 좋아요 즉시 상태 변경
  - 모달 및 토스트 알림
  - 성공/실패 시각적 표시

## 8. 모바일 최적화

### 8.1 터치 인터페이스
- 모바일 사용성 개선
- 구현 기능:
  - 터치 제스처 지원 (핀치, 스와이프, 탭)
  - 터치 친화적 UI 요소
  - 모바일 화면 최적화
  - 가상 키보드 대응

### 8.2 모바일 성능
- 리소스 효율적 사용
- 구현 기법:
  - 네트워크 요청 최소화
  - 이미지 크기 최적화
  - 배터리 효율적 코드
  - 오프라인 대응

